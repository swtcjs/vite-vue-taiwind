<template>
  <ul class="list-disc space-y-2" v-for="repo in repos" :key="repo.id">
	  <li class="flex items-start">
      <span class="h-6 flex items-center sm:h-7">
          <svg class="flex-shrink-0 h-5 w-5 text-cyan-500" viewBox="0 0 20 20" fill="green">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg>
      </span>
      <p><code class="text-sm font-bold text-gray-900"></code>{{ repo.full_name }}</p>
    </li>
    <Issues :owner="repo.owner.login" :repo="repo.name" />
  </ul>
</template>

<script lang="ts">
  import GitRepo from "../types/Repo"
  import { defineComponent } from "vue"
  import { octokitClient } from "../composables/octokit"
  const octokit = octokitClient(localStorage.getItem("github-token") || "")
  import Issues from "./repo/Issues.vue"
  export default defineComponent({
    name: "Repos",
    components: { Issues },
    data() {
      return {
        repos: [] as GitRepo[]
      }
    },
    async created() {
      const { data: repos } = await octokit.request("/user/repos")
      this.repos = repos
    }
  })
</script>
